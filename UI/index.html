<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Показания счётчиков</title>

<style>
body {
	font-family: system-ui, sans-serif;
	margin: 0;
	padding: 16px;
	background: #f5f5f5;
}

nav {
	display: flex;
	gap: 8px;
	margin-bottom: 16px;
}

button {
	flex: 1;
	padding: 10px;
	border: none;
	border-radius: 8px;
	background: #ddd;
}

button.active {
	background: #333;
	color: #fff;
}

section {
	display: none;
	background: #fff;
	padding: 16px;
	border-radius: 8px;
}

section.active {
	display: block;
}

input {
	width: 100%;
	padding: 8px;
	margin-bottom: 12px;
}

pre {
	white-space: pre-wrap;
	background: #eee;
	padding: 8px;
	border-radius: 6px;
}
</style>
</head>

<body>

<nav>
	<button onclick="show('gas')" class="active">Газ</button>
	<button onclick="show('energy')">Электро</button>
	<button onclick="show('history')">История</button>
</nav>

<section id="gas" class="active">
	<h3>Газ</h3>
	<input id="gasValue" type="number" placeholder="Показание"/>
	<button onclick="sendGas()">Отправить</button>
</section>

<section id="energy">
	<h3>Электроэнергия</h3>
	<input id="day" type="number" placeholder="День"/>
	<input id="night" type="number" placeholder="Ночь"/>
	<input id="summ" type="number" placeholder="Сумма"/>
	<button onclick="sendEnergy()">Отправить</button>
</section>

<section id="history">
	<h3>История</h3>
	<button onclick="loadGasHistory()">Газ</button>
	<button onclick="loadEnergyHistory()">Электро</button>
	<pre id="historyOutput"></pre>
</section>

<script>
const API = "http://localhost:8081";

function show(id) {
	document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
	document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));

	document.getElementById(id).classList.add("active");
	event.target.classList.add("active");
}

async function sendGas() {
	await fetch(API + "/sendgas", {
		method: "POST",
		headers: { "Content-Type": "application/json" },
		body: JSON.stringify({ value: Number(gasValue.value) })
	});
	alert("Отправлено");
}

async function sendEnergy() {
	await fetch(API + "/sendenergy", {
		method: "POST",
		headers: { "Content-Type": "application/json" },
		body: JSON.stringify({
			day: Number(day.value),
			night: Number(night.value),
			summ: Number(summ.value)
		})
	});
	alert("Отправлено");
}

async function loadGasHistory() {
	const r = await fetch(API + "/history/gas");
	historyOutput.textContent = await r.text();
}

async function loadEnergyHistory() {
	const r = await fetch(API + "/history/energy");
	historyOutput.textContent = await r.text();
}
</script>

</body>
</html>
